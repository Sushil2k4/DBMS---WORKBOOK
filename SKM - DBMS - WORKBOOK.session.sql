CREATE DATABASE DBMS_WORKBOOK;
USE DBMS_WORKBOOK;

CREATE TABLE  DEPT (
DEPTNO INT PRIMARY KEY,
DNAME VARCHAR(50),
LOC VARCHAR(50)
);

CREATE TABLE EMP (
EMPNO INT PRIMARY KEY,
ENAME VARCHAR(50),
JOB CHAR(10),
MGR INT,
HIREDATE DATE,
SAL INT,
COMM INT,
DEPTNO INT,
FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO));

SELECT * FROM DEPT;
SELECT * FROM EMP;

DESC DEPT;
DESC EMP;


SHOW TABLES;

SHOW table status;


SELECT DISTINCT TABLE_TYPE 
FROM information_schema.TABLES 
WHERE TABLE_SCHEMA = 'DBMS_WORKBOOK';


SELECT TABLE_NAME, TABLE_TYPE 
FROM information_schema.TABLES 
WHERE TABLE_SCHEMA = 'DBMS_WORKBOOK';

SHOW TABLES LIKE '%seq%';

ALTER TABLE DEPT
ADD COLUMN  COMNT VARCHAR(255),
ADD COLUMN  MISCEL VARCHAR(255);

ALTER TABLE DEPT
MODIFY COLUMN COMNT VARCHAR(300),  
MODIFY COLUMN MISCEL VARCHAR(300);

SELECT * FROM DEPT;

ALTER TABLE DEPT
MODIFY COLUMN LOC VARCHAR(15);

RENAME TABLE DEPT TO DEP12;

RENAME TABLE DEP12 TO DEPT12;

DELETE FROM DEPT12;

ALTER TABLE DEPT12 COMMENT 'Department information table';

SELECT TABLE_COMMENT
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'dbms_workbook'
AND TABLE_NAME = 'DEPT12';

DROP TABLE DEPT12 ;

CREATE TABLE  DEPT (
DEPTNO INT PRIMARY KEY,
DNAME VARCHAR(50),
LOC VARCHAR(50)
);

TRUNCATE TABLE DEPT;
INSERT INTO DEPT VALUES
(10, 'ACCOUNTING', 'NEW YORK'),
(20, 'RESEARCH', 'DALLAS'),
(30, 'SALES', 'CHICAGO'),
(40, 'OPERATIONS', 'BOSTON');

TRUNCATE TABLE EMP;
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES
(7369, 'AKON', 'CLERK', 7902, '2015-12-17', 1000, NULL, 20),
(7499, 'MAT', 'SALESMAN', 7698, '1998-02-20', 30000, 300, 30);

-- 1. Create fresh database and tables
DROP DATABASE IF EXISTS DBMS_WORKBOOK;
CREATE DATABASE DBMS_WORKBOOK;
USE DBMS_WORKBOOK;

-- 2. Create DEPT table first
CREATE TABLE DEPT (
    DEPTNO INT PRIMARY KEY,
    DNAME VARCHAR(50),
    LOC VARCHAR(50)
);

-- 3. Create EMP table with proper foreign key
CREATE TABLE EMP (
    EMPNO INT PRIMARY KEY,
    ENAME VARCHAR(50),
    JOB VARCHAR(20),  -- Changed from CHAR(10) to VARCHAR(20)
    MGR INT,
    HIREDATE DATE,
    SAL INT,
    COMM INT,
    DEPTNO INT,
    FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
);

-- 4. Add additional columns to DEPT
ALTER TABLE DEPT
ADD COLUMN COMNT VARCHAR(300),
ADD COLUMN MISCEL VARCHAR(300);

-- 5. Modify LOC column size
ALTER TABLE DEPT MODIFY COLUMN LOC VARCHAR(15);

-- 6. Insert department data first
INSERT INTO DEPT VALUES
(10, 'ACCOUNTING', 'NEW YORK'),
(20, 'RESEARCH', 'DALLAS'),
(30, 'SALES', 'CHICAGO'),
(40, 'OPERATIONS', 'BOSTON');

-- 7. Insert employee data
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES
(7369, 'SUSHIL', 'CLERK', 7902, '2015-12-17', 1000, NULL, 20),
(7499, 'SANTOSH', 'SALESMAN', 7698, '1998-02-20', 30000, 300, 30),
(7521, 'WARD', 'SALESMAN', 7698, '1981-02-22', 1250, 500, 30),
(7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975, NULL, 20),
(7654, 'MARTIN', 'SALESMAN', 7698, '1981-09-28', 1250, 1400, 30),
(7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01', 2850, NULL, 30),
(7782, 'CLARK', 'MANAGER', 7839, '1981-06-09', 2450, NULL, 10),
(7788, 'SCOTT', 'ANALYST', 7566, '1982-12-09', 3000, NULL, 20),
(7839, 'KING', 'PRESIDENT', NULL, '1981-11-17', 5000, NULL, 10),
(7844, 'TURNER', 'SALESMAN', 7698, '1981-09-08', 1500, 0, 30),
(7876, 'ADAMS', 'CLERK', 7788, '1983-01-12', 1100, NULL, 20),
(7900, 'JAMES', 'CLERK', 7698, '1981-12-03', 950, NULL, 30),
(7902, 'FORD', 'ANALYST', 7566, '1981-12-03', 3000, NULL, 20),
(7934, 'MILLER', 'CLERK', 7782, '1982-01-23', 1300, NULL, 10);

-- 8. Verification queries
SELECT * FROM DEPT;
SELECT * FROM EMP;
DESC DEPT;
DESC EMP;
SHOW TABLES;

CREATE TABLE manager(mgr_id int (5) primary key,
name varchar(20), sal int (5), hiredate date);

INSERT INTO manager (mgr_id, name, sal, hiredate)
SELECT empno, ename, sal, hiredate
FROM emp 
WHERE job = 'MANAGER';

SELECT * FROM manager;

update dept
set loc = 'NEW YORK';

update dept
set loc = 'DALLAS'
where deptno = 20;
